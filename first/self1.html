<!DOCTYPE html>
<html>
<head>
	<title>粒子满天星</title>
	<style>
        html,body {
            margin:0;
            overflow:hidden;
            width:100%;
            height:100%;
            cursor:none;
            background:black;
            cursor: pointer;
        }
    </style>
</head>
<body>
	<canvas id="canvas">
		
	</canvas>
	<script>
	    var ctx =document.getElementById("canvas"),
	    content = ctx.getContext('2d'),
	    WIDTH,
	    HEIGHT,
	    round=[],
	    initRoundPopulation=70;

	   


	    WIDTH = document.documentElement.clientWidth;
	    HEIGHT = document.documentElement.clientHeight;

	    ctx.width = WIDTH;
	    ctx.height = HEIGHT;

	    /**
	    * Round_item  属性
		* 闪耀的星星的需要哪些参数
		*  圆 透明度 大小   index索引值
	    **/
	    function Round_item (index,x,y){
	    	this.index = index ;
	    	this.x=x;
	    	this.y=y;
	    	this.r=Math.random()*2+1;
	    	//透明度的变化
	    	var alpha = (Math.floor(Math.random()*10)+1)/10;
	    	this.color = "rgba(255,255,255,"+alpha+")";
	    }
	    /**绘画功能**/
	    Round_item.prototype.draw=function () {
	    	content.fillStyle = this.color;
	    	content.shadowBlur = this.r*2;
	    	content.beginPath();
	    	content.arc(this.x,this.y,this.r,0,2*Math.PI,false);
	    	content.closePath();
	    	content.fill();
	    }

	    /**animate效果
		* move
		* clearRect
		* 也可以用递归
	    **/
	    function animate(){
	    	content.clearRect(0,0,WIDTH,HEIGHT);
	    	var length = round.length;
	    	//遍历注意性能优化
	    	for(var i=0;i<length;i++){
	    		round[i].move();
	    	};
	    	//requestAnimationFrame 单次定时
	    	requestAnimationFrame(animate);
	    };
	    /**
		* move
	    **/
	    Round_item.prototype.move=function () {
	    	this.y -= 0.15;
	    	if(this.y<=-10){
	    		this.y = HEIGHT+10;
	    	}
	    	this.draw()
	    }

	    /**鼠标移动事件**/


	    /**初始化 星星个数**/
	    function init() {
	    	for(var i=0;i<initRoundPopulation;i++){
				round[i] = new Round_item(i,Math.random()*WIDTH,Math.random()*HEIGHT);
				round[i].draw();
	    	};
	    	animate();
	    }
	    init()
	</script>
</body>
</html>